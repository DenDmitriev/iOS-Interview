# Combine
–≠—Ç–æ –æ—Å–Ω–æ–≤–∞ Apple –¥–ª—è —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–∑–¥–∞–Ω–Ω–∞—è –≤ 2019 –≥–æ–¥—É. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–º –ø–æ–ª—É—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å —Ç–µ—á–µ–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã —à–∞–±–ª–æ–Ω—É –¥–µ–ª–µ–≥–∞—Ç–æ–≤ –∏–ª–∏ –æ–±—Ä–∞—Ç–Ω—ã–º –≤—ã–∑–æ–≤–∞–º –≤ –±–ª–æ–∫–∞—Ö –∑–∞–º—ã–∫–∞–Ω–∏—è.

–í —Å—Ç—Ä—É–∫—Ç—É—Ä–µ Combine –µ—Å—Ç—å —Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–º –Ω—É–∂–Ω–æ –ø–æ–Ω—è—Ç—å, –ø—Ä–µ–∂–¥–µ —á–µ–º –ø–æ–≥—Ä—É–∑–∏—Ç—å—Å—è –≤ –Ω–µ–µ:
1. [–ò–∑–¥–∞—Ç–µ–ª—å –∏–ª–∏ Publisher](#–∏–∑–¥–∞—Ç–µ–ª—å-–∏–ª–∏-publisher)
2. [–ü–æ–¥–ø–∏—Å—á–∏–∫ (Subscriber) –∫–æ—Ç–æ—Ä—ã–π –∏–º–µ–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É (Subscription) –Ω–∞ –∏–∑–¥–∞—Ç–µ–ª—è](#–ø–æ–¥–ø–∏—Å—á–∏–∫-–∏–ª–∏-subscriber)
3. [–û–ø–µ—Ä–∞—Ç–æ—Ä—ã](#–æ–ø–µ—Ä–∞—Ç–æ—Ä—ã)

## –ò–∑–¥–∞—Ç–µ–ª—å –∏–ª–∏ Publisher
–≠—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª, –∫–æ—Ç–æ—Ä—ã–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–≤—è–∑–∞–Ω–Ω—ã–π —Ç–∏–ø–∞ –∑–Ω–∞—á–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å—Å—è —Å —Ç–µ—á–µ–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–∏ –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–π —Ç–∏–ø –æ—à–∏–±–∫–∏ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–±–æ–µ–≤.

> –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–∏–ø—ã - —ç—Ç–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–∑–¥–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –ø–æ–¥–ø–∏—Å—á–∏–∫—É –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏.

–í–∑–≥–ª—è–Ω–∏—Ç–µ –Ω–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª Publisher –∏ –æ–¥–Ω–æ –∏–∑ –µ–≥–æ –Ω–∞–∏–±–æ–ª–µ–µ –≤–∞–∂–Ω—ã—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π:
```swift
public protocol Publisher<Output, Failure> {
  // –¢–∏–ø –∑–Ω–∞—á–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –∏–∑–¥–∞—Ç–µ–ª—å.
  associatedtype Output

  // –¢–∏–ø –æ—à–∏–±–∫–∏, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –∏–∑–¥–∞—Ç–µ–ª—å, –∏–ª–∏ Never, –µ—Å–ª–∏ –∏–∑–¥–∞—Ç–µ–ª—å –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –Ω–µ –≤—ã–¥–∞–µ—Ç –æ—à–∏–±–∫—É.
  associatedtype Failure : Error

  // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è subscribe(_:) –≤—ã–∑–æ–≤–µ—Ç receive(subscriber:), —á—Ç–æ–±—ã –ø—Ä–∏–≤—è–∑–∞—Ç—å –ø–æ–¥–ø–∏—Å—á–∏–∫–∞ –∫ –∏–∑–¥–∞—Ç–µ–ª—é, —Ç.–µ. —Å–æ–∑–¥–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫—É.
  func receive<S>(subscriber: S)
    where S: Subscriber,
    Self.Failure == S.Failure,
    Self.Output == S.Input
}

extension Publisher {
  // –ü–æ–¥–ø–∏—Å—á–∏–∫ –≤—ã–∑—ã–≤–∞–µ—Ç subscribe(_:) —É –∏–∑–¥–∞—Ç–µ–ª—è, —á—Ç–æ–±—ã –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç—å –∫ –Ω–µ–º—É.
  public func subscribe<S>(_ subscriber: S)
    where S : Subscriber,
    Self.Failure == S.Failure,
    Self.Output == S.Input
}
```

–ü—Ä–æ—Ç–æ–∫–æ–ª –∏–º–µ–µ—Ç –¥–≤–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Ç–∏–ø–∞ (associated types), –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã:
- Output: –¢–∏–ø –∑–Ω–∞—á–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å String, Int, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ —Ç. –¥.
- Failure: –¢–∏–ø –æ—à–∏–±–∫–∏, –∫–æ—Ç–æ—Ä—ã–π –º—ã —Ö–æ—Ç–∏–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –∫–æ–≥–¥–∞ –º—ã —Ö–æ—Ç–∏–º –≤—ã–ø—É—Å—Ç–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ —Å–±–æ—è.

## –ü–æ–¥–ø–∏—Å—á–∏–∫ –∏–ª–∏ Subscriber
–≠—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª, –∫–æ—Ç–æ—Ä—ã–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–≤—è–∑–∞–Ω–Ω—ã–π —Ç–∏–ø–∞ –∑–Ω–∞—á–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å —Å —Ç–µ—á–µ–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–∏ –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–π —Ç–∏–ø –æ—à–∏–±–∫–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–±–æ–µ–≤.
–ò–ª–∏ –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏ –ø–æ–¥–ø–∏—Å—á–∏–∫ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∞—Ç—å —Å–æ–±—ã—Ç–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –∏–∑–¥–∞–µ—Ç –∏–∑–¥–∞—Ç–µ–ª—å, –∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –∑–∞–¥–∞—á—É, –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –¥–ª—è —ç—Ç–∏—Ö —Å–æ–±—ã—Ç–∏–π.

```swift
public protocol Subscriber<Input, Failure>: CustomCombineIdentifierConvertible {
  // –¢–∏–ø –∑–Ω–∞—á–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –ø–æ–¥–ø–∏—Å—á–∏–∫.
  associatedtype Input

  // –¢–∏–ø –æ—à–∏–±–∫–∏, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –ø–æ–¥–ø–∏—Å—á–∏–∫; –∏–ª–∏ Never, –µ—Å–ª–∏ –ø–æ–¥–ø–∏—Å—á–∏–∫ –Ω–µ –ø–æ–ª—É—á–∏—Ç –æ—à–∏–±–∫—É.
  associatedtype Failure: Error

  // –ò–∑–¥–∞—Ç–µ–ª—å –≤—ã–∑—ã–≤–∞–µ—Ç receive(subscription:) –Ω–∞ –ø–æ–¥–ø–∏—Å—á–∏–∫–∞, —á—Ç–æ–±—ã –¥–∞—Ç—å –µ–º—É –ø–æ–¥–ø–∏—Å–∫—É.
  func receive(subscription: Subscription)

  // –ò–∑–¥–∞—Ç–µ–ª—å –≤—ã–∑—ã–≤–∞–µ—Ç receive(_:) –Ω–∞ –ø–æ–¥–ø–∏—Å—á–∏–∫–∞, —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –µ–º—É –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –æ–Ω —Ç–æ–ª—å–∫–æ —á—Ç–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–ª.
  func receive(_ input: Self.Input) -> Subscribers.Demand

  // –ò–∑–¥–∞—Ç–µ–ª—å –≤—ã–∑—ã–≤–∞–µ—Ç receive(completion:) –ø–æ–¥–ø–∏—Å—á–∏–∫—É, —á—Ç–æ–±—ã —Å–æ–æ–±—â–∏—Ç—å –µ–º—É, —á—Ç–æ –æ–Ω –∑–∞–∫–æ–Ω—á–∏–ª –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è, –ª–∏–±–æ –∏–∑-–∑–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è, –ª–∏–±–æ –∏–∑-–∑–∞ –æ—à–∏–±–∫–∏.
  func receive(completion: Subscribers.Completion<Self.Failure>)
}
```

### –ü–æ–¥–ø–∏—Å–∫–∞ –∏–ª–∏ Subscription
–≠—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª, –∫–æ—Ç–æ—Ä—ã–π —Å–≤—è–∑—ã–≤–∞–µ—Ç –∏–∑–¥–∞—Ç–µ–ª—è –∏ –ø–æ–¥–ø–∏—Å—á–∏–∫–∞. –í–æ—Ç –ø—Ä–æ—Ç–æ–∫–æ–ª Subscription:
```swift
public protocol Subscription: Cancellable, CustomCombineIdentifierConvertible {
  func request(_ demand: Subscribers.Demand)
}
```
–ú–µ—Ç–æ–¥–æ–º request(_:) —É–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –ø–æ–¥–ø–∏—Å—á–∏–∫ –≥–æ—Ç–æ–≤ –ø–æ–ª—É—á–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏. –ù–∞–ø—Ä–∏–º–µ—Ä —Ç—É—Ç –ø–æ–¥–ø–∏—Å—á–∏–∫ –≥–æ—Ç–æ–≤ –ø–æ–ª—É—á–∏—Ç—å –¥–æ —Ç—Ä–µ—Ö –∑–Ω–∞—á–µ–Ω–∏–π –ø—Ä–∏ –ø–æ–¥–ø–∏—Å–∫–µ:
```swift
subscription.request(.max(3))
```

–ü—Ä–æ—Ç–æ–∫–æ–ª —Å–æ–æ—Ç–≤–µ—Ç—Å–≤—É–µ—Ç –¥—Ä—É–≥–æ–º—É –ø—Ä–æ—Ç–æ–∫–æ–ª—É `Cancellable`
```swift
public protocol Cancellable {
  func cancel()
}
```
–ú–µ—Ç–æ–¥ `cancel()` —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ–∞–ª–∑–∏–æ–≤–∞—Ç—å –æ—Å—Ç–∞–Ω–æ–≤–∫—É –ø—É–±–ª–∫–∞—Ü–∏–∏ —á—Ç–æ–± –∑–∞–≤–µ—Ä—à–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É –∏ —Ä–∞–∑–æ—Ä–≤–∞—Ç—å —Å–∏–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏.

### AnyCancellable
AnyCancellable —è–≤–ª—è–µ—Ç—Å—è –∫–ª–∞—Å—Å–æ–º –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø—Ä–æ—Ç–æ–∫–æ–ª `Cancellable`. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –ø–æ–¥–ø–∏—Å–æ–∫ –∏–∑–¥–∞—Ç–µ–ª–µ–π, –∞ –∏–º–µ–Ω–Ω–æ –∏–º–µ–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Ö –∑–∞–≤–µ—Ä—à–∏—Ç—å –º–µ—Ç–æ–¥–æ–º `cancel()`. 

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
–°–æ–±—ã—Ç–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–µ—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –∏–∑–¥–∞—Ç–µ–ª—å –¥–ª—è –ø–æ–¥–ø–∏—á—Å–∏–∫–∞: 
- –∑–Ω–∞—á–µ–Ω–∏—è
- –æ—à–∏–±–∫–∞
- –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ

<img width="654" alt="–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-02-27 –≤ 16 52 09" src="https://github.com/DenDmitriev/iOS-Interview/assets/65191747/4d96c7ec-c0bd-4cba-84e0-eed8b14d0477">

–ü—Ä–æ–≥—É–ª–∏–≤–∞—è—Å—å –ø–æ —ç—Ç–æ–π –¥–∏–∞–≥—Ä–∞–º–º–µ:
1. –ü–æ–¥–ø–∏—Å—á–∏–∫ –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –∏–∑–¥–∞—Ç–µ–ª—è.
2. –ò–∑–¥–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –µ–µ –ø–æ–¥–ø–∏—Å—á–∏–∫—É.
3. –ü–æ–¥–ø–∏—Å—á–∏–∫ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è.
4. –ò–∑–¥–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è.
5. –ò–∑–¥–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ.

## –û–ø–µ—Ä–∞—Ç–æ—Ä—ã
–°—É—â–µ—Å—Ç–≤—É—é—Ç –º–µ—Ç–æ–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–¥–∞–µ—Ç –∏–∑–¥–∞—Ç–µ–ª—å. –ú—ã –º–æ–∂–µ–º —Å–≤—è–∑–∞—Ç—å —Å—Ç–æ–ª—å–∫–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤, —Å–∫–æ–ª—å–∫–æ –∑–∞—Ö–æ—Ç–∏–º. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –º—ã –¥–µ–ª–∞–µ–º —Å–µ—Ç–µ–≤–æ–π –∑–∞–ø—Ä–æ—Å –∏ –ø–æ–ª—É—á–∞–µ–º –æ—à–∏–±–∫—É 500, –º—ã –º–æ–∂–µ–º –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —ç—Ç—É –æ—à–∏–±–∫—É, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –µ–µ –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ç–∏–ø –æ—à–∏–±–∫–∏ –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ.
–í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –µ—Å—Ç—å —É Combine, [–∑–¥–µ—Å—å](https://developer.apple.com/documentation/combine/anypublisher-publisher-operators/).

## –û–±—ä–µ–¥–∏–Ω–∏–º —ç—Ç–æ –≤ –∫–æ–¥–µ
–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–ª–∏ –æ—Å–Ω–æ–≤—ã, –¥–∞–≤–∞–π—Ç–µ –ø–µ—Ä–µ–π–¥–µ–º –∫ –Ω–µ–∫–æ—Ç–æ—Ä—ã–º –ø—Ä–∏–º–µ—Ä–∞–º –∫–æ–¥–∞, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å, –∫–∞–∫ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —Ä–∞–±–æ—Ç–∞–µ—Ç Combine.

–¢–∞–∫ –∫–∞–∫ Publisher —ç—Ç–æ –≤—Å–µ–≥–æ –ª–∏—à—å –ø—Ä–æ—Ç–æ–∫–æ–ª –Ω–∞–º –Ω—É–∂–µ–Ω –æ–±—ä–µ–∫—Ç –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–∞–ª–∏–∑—É–µ—Ç —ç—Ç–æ—Ç –ø—Ä–æ—Ç–æ–∫–æ–ª. –ú—ã –º–æ–∂–µ–º –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –Ω–µ–∫–æ—Ç–æ—Ä—ã–º–∏ –∏–∑ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –∏–∑–¥–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç Combine, –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–≤–æ–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ. –î–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ –Ω–∞–∏–±–æ–ª–µ–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ.
–ú—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–∏–ø `AnyPublisher`, –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ Publisher.

### Just (–¢–æ–ª—å–∫–æ)
–°—Ç—Ä—É–∫—Ç—É—Ä–∞ Just —Å–æ–∑–¥–∞–µ—Ç –ø—Ä–æ—Å—Ç–æ–≥–æ –∏–∑–¥–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–¥–∞—Å—Ç –æ–¥–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤, –∞ –∑–∞—Ç–µ–º –∑–∞–≤–µ—Ä—à–∏—Ç –ø–æ–¥–ø–∏—Å–∫—É.

<img width="291" alt="–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-02-27 –≤ 17 37 43" src="https://github.com/DenDmitriev/iOS-Interview/assets/65191747/b0014cfc-1d4d-4f56-b0f3-679a06ae4052">

```swift
// –ò–∑–¥–∞—Ç–µ–ª—å
let just = Just("Hello world!")

// –ü–æ–¥–ø–∏—Å–∫–∞
let cancellable: AnyCancellable?

cancellable = just
    .sink( // –ü–æ–¥–ø–∏c–∞–Ω–∏–µ –Ω–∞ –∏–∑–¥–∞—Ç–µ–ª—è 
        receiveCompletion: {
            print("Received completion", $0)
        },
        receiveValue: {
            print("Received value", $0)
        })
// Received value Hello world!
// Received completion finished
```
`sink` —ç—Ç–æ –º–µ—Ç–æ–¥ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ Publisher. –ú–µ—Ç–æ–¥ `sink` –≤—ã—Å—Ç—É–ø–∞–µ—Ç –∫–∞–∫ –ø–æ–¥–ø–∏—Å—á–∏–∫ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `AnyCancellable` –∏ –º—ã —Ö—Ä–∞–Ω–∏–º –µ—ë –≤ —Å–≤–æ–π—Å—Ç–≤–µ `cancellable` —á—Ç–æ–± –ø–æ–¥–ø–∏—Å–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–∞. 

### Empty (–ü—É—Å—Ç–æ–π)
–°—Ç—Ä—É–∫—Ç—É—Ä–∞ Empty —è–≤–ª—è–µ—Ç—Å—è –µ—â–µ –æ–¥–Ω–∏–º —É–¥–æ–±–Ω—ã–º –∑–∞–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º –∏–∑–¥–∞—Ç–µ–ª–µ–º. –û–Ω –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–ª—É—á–µ–Ω–∏—è –∫–∞–∫–∏—Ö-–ª–∏–±–æ –∑–Ω–∞—á–µ–Ω–∏–π.

<img width="291" alt="–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-02-27 –≤ 18 09 23" src="https://github.com/DenDmitriev/iOS-Interview/assets/65191747/3c98fa20-68c1-4ce3-8269-c8515f66283b">

```swift
let empty = Empty<String, Never>()

let cancellable: AnyCancellable?

cancellable = empty
    .sink(
    receiveCompletion: {
        print("Received completion", $0)
    },
    receiveValue: {
        print("Received value", $0)
    })
// Received completion finished
```

### Fail (–ù–µ—É–¥–∞—á–∞)
–ò–∑–¥–∞—Ç–µ–ª—å Fail –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö —Å —É–∫–∞–∑–∞–Ω–Ω–æ–π –æ—à–∏–±–∫–æ–π. –í –æ—Å–Ω–æ–≤–Ω–æ–º –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ—Ç–ª–∞–¥–∫–∏.

```swift
let fail = Fail<Int, Error>(error: ErrorDomain.example)

let cancellable: AnyCancellable?

cancellable = fail
    .sink(
        receiveCompletion: { completion in
            switch completion {
            case .finished:
                print("Received completion")
            case .failure(let failure):
                print("Received completion with error: \(failure.localizedDescription)")
            }
        },
        receiveValue: {
            print("Received value", $0)
        })
// Received completion with error: üëæ Example error
```
### –ë—É–¥—É—â–µ–µ (Future)
–≠—Ç–æ –∫–ª–∞—Å—Å, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –≤—ã–¥–∞–≤–∞—Ç—å –∏–ª–∏ –Ω–µ –≤—ã–¥–∞–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –∏ –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –∏–ª–∏ –≤—ã–¥–∞–≤–∞—Ç—å –æ—à–∏–±–∫—É. –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –≤—ã–∑–æ–≤–æ–≤ API. –ù–∞–º –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ–±–µ—â–∞–Ω–∏–µ (Promise) —Å –∫–∞–∫–∏–º-—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º (Result<Output, Error>), –æ–Ω –º–æ–∂–µ—Ç –±—ã—Ç—å —É—Å–ø–µ—à–Ω—ã–º –∏–ª–∏ –Ω–µ—É–¥–∞—á–Ω—ã–º. –ï—Å–ª–∏ –æ–±–µ—â–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ, —ç—Ç–æ –æ–±–µ—â–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∞–±–æ–Ω–µ–Ω—Ç—É.

–ù–∞–ø—Ä–∏–º–µ—Ä —Å–¥–µ–ª–∞–µ–º –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∫–æ—à–µ–∫:
```swift
enum ErrorCat: Error, LocalizedError {
    case error(description: String)
    
    var errorDescription: String? {
        switch self {
        case .error(let description):
            description
        }
    }
}

struct Cat: Decodable {
    let url: URL
}

let future = Future<[Cat], ErrorCat> { promise in
    let request = URLRequest(url: URL(string: "https://api.thecatapi.com/v1/images/search?limit=3")!)
    Task {
        do {
            let (data, _) = try await URLSession.shared.data(for: request)
            let cats = try JSONDecoder().decode([Cat].self, from: data)
            promise(.success(cats))
        } catch {
            promise(.failure(.error(description: error.localizedDescription)))
        }
    }
}

let cancellable: AnyCancellable?

cancellable = future
    .sink(receiveCompletion: { completion in
        switch completion {
        case .finished:
            print("Finished")
        case .failure(let failure):
            print("Finished with failure: \(failure.localizedDescription)")
        }
    }, receiveValue: { cats in
        cats.forEach { cat in
            print(cat.url)
        }
    })
// –ö–æ–Ω—Å–æ–ª—å:
// –ï—Å–ª–∏ –Ω–µ –±—É–¥–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ —Ç–æ: Finished with failure: A server with the specified hostname could not be found.
// –í —Å–ª—É—á–∞–µ —É–¥–∞—á–∏:
// https://cdn2.thecatapi.com/images/28j.jpg
// https://cdn2.thecatapi.com/images/4h4.gif
// https://cdn2.thecatapi.com/images/5bv.jpg
// ...
// Finished
```

### –ò–∑–¥–∞—Ç–µ–ª—å –∏–∑ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
–ú–∞—Å—Å–∏–≤ –¥–∞–Ω–Ω—ã—Ö –º–æ–∂–Ω–æ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∫–∞–∫ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–æ–±—ã—Ç–∏–π —Å —Ç–µ—á–µ–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–∏. –ü–æ—ç—Ç–æ–º—É –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —è–≤–ª—è–µ—Ç—Å—è –æ—Ç–ª–∏—á–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ –∏–∑–¥–∞—Ç–µ–ª—è.
`Sequence` –∏–º–µ–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–æ —Å–≤–æ–π—Å—Ç–≤–æ–º `publisher` c —Ç–∏–ø–æ–º `Publishers.Sequence<Self, Never>`–∫–æ—Ç–æ—Ä–µ –æ–±—ä–µ–¥–µ–Ω—è–µ—Ç —ç–ª–µ–º–µ–Ω—Ç—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤ –ø–æ—Ç–æ–∫ –ø—É–±–ª–∏–∫—É—é—â–∏—Ö—Å—è –¥–∞–Ω–Ω—ã—Ö.
```swift
extension Sequence {
    public var publisher: Publishers.Sequence<Self, Never> { get }
}
```

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –Ω–∞–º –Ω—É–∂–µ–Ω –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–π –∏–∑–ª—É—á–∞–µ—Ç —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞ —Å —Ç–µ—á–µ–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–∏. –í—ã–ø—É—â–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫.

<img width="513" alt="–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-02-28 –≤ 09 00 56" src="https://github.com/DenDmitriev/iOS-Interview/assets/65191747/fd0a7e3a-1dc4-4fc7-8145-aea91aada5ea">

Array —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç Sequence. –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏–º–µ–µ—Ç —É–¥–æ–±–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ, –Ω–∞–∑—ã–≤–∞–µ–º–æ–µ –∏–∑–¥–∞—Ç–µ–ª–µ–º `publisher`, –∫–æ—Ç–æ—Ä–æ–µ —Å–æ–∑–¥–∞–µ—Ç –∏–∑–¥–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–π –∏–∑–ª—É—á–∞–µ—Ç —ç–ª–µ–º–µ–Ω—Ç—ã –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –î–∞–≤–∞–π—Ç–µ —Å–æ–∑–¥–∞–¥–∏–º –∏–∑–¥–∞—Ç–µ–ª—è –∏—Å–ø–æ–ª—å–∑—É—è —ç—Ç–æ —Å–≤–æ–π—Å—Ç–≤–∞ –∏ –ø–æ–ø—Ä–æ–±—É–µ–º —Å—Ä–∞–≤–Ω–∏—Ç—å —Å –∏–∑–¥–∞—Ç–µ–ª–µ–º —Å–æ–∑–¥–≤–Ω–Ω—ã–º —á–µ—Ä–µ–∑ `Publishers.Sequence<Elements, Failure>`

```swift
let sequence = [1, 2, 3, 4, 5].publisher
let publishers = Publishers.Sequence<[Int], Never>(sequence: [1, 2, 3, 4, 5])
print(type(of: sequence)) // Sequence<Array<Int>, Never>
print(type(of: publishers)) // Sequence<Array<Int>, Never>
```
–¢–∏–ø—ã –∏–∑–¥–∞—Ç–µ–ª–µ–π –æ–∫–∞–∑–∞–ª–∏—Å—å –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–º–∏. –¢–æ –µ—Å—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ `publisher` —É –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —ç—Ç–æ –±—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–± —Å–æ–∑–¥–∞–Ω–∏—è –∏–∑–¥–∞—Ç–µ–ª—è. –¢–µ–ø–µ—Ä—å –ø–æ–¥–ø–∏—à–µ–º—Å—è –Ω–∞ –∏–∑–¥–∞—Ç–µ–ª—è:
```swift
sequence
    .sink { value in
        print(value)
    }
// 1
// 2
// 3
// 4
// 5
```
–∏–ª–∏ —á—Ç–æ–±—ã –≤—ã –º–æ–≥–ª–∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–∞–º—è—Ç—å—é –∏ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –ø–æ–¥–ø–∏—Å–æ–∫ –∏–∑–¥–∞—Ç–µ–ª–µ–π. –í—ã –º–æ–∂–µ—Ç–µ —Ö—Ä–∞–Ω–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —Ä–∞–∫–æ–≤–∏–Ω—É –≤–æ—Ç —Ç–∞–∫.
```swift
let cancellable: AnyCancellable?
cancellable = sequence
    .sink { value in
        print(value)
    }
// 1
// 2
// 3
// 4
// 5
```

### –ü—Ä–µ–¥–º–µ—Ç—ã (Subjects)
–≠—Ç–æ –ø–æ–¥–∫–ª–∞—Å—Å –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ Publisher, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –≤—ã–¥–∞–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º, –≤—ã–∑—ã–≤–∞—è –º–µ—Ç–æ–¥ send(_:) –í Combine —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –¥–≤–∞ —Ç–∏–ø–∞ subject, –∫–æ—Ç–æ—Ä—ã–µ –≥–æ—Ç–æ–≤—ã –∫ —Ä–∞–±–æ—Ç–µ:
- PassThroughSubject, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–¥–∞–µ—Ç –Ω–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º –±–µ–∑ —Ö—Ä–∞–Ω–µ–Ω–∏—è.
- CurrentValueSubject, –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏ –ø—É–±–ª–∏–∫—É–µ—Ç –µ–≥–æ –¥–ª—è –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ –≤—Å—è–∫–∏–π —Ä–∞–∑, –∫–æ–≥–¥–∞ —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –º–µ–Ω—è–µ—Ç—Å—è.

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –º—ã —Ä–∞–±–æ—Ç–∞–µ–º –Ω–∞–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –ø—Ä—è–º–æ–º —ç—Ñ–∏—Ä–µ –∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –æ —Ñ—É—Ç–±–æ–ª—å–Ω–æ–º –º–∞—Ç—á–µ.
```swift
import Combine
import Foundation

enum LiveScoreError: Error, LocalizedError {
    case badWeather
    
    public var errorDescription: String? {
        switch self {
        case .badWeather:
            return "–ò–≥—Ä–∞ –±—ã–ª–∞ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∏–∑-–∑–∞ –ø–ª–æ—Ö–∏—Ö –ø–æ–≥–æ–¥–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π"
        }
    }
}

struct LiveScore<T: Subject> where T.Failure == LiveScoreError {
    
    public var publisher: T
    
    public init(publisher: T) {
        self.publisher = publisher
    }
    
    /// –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–æ–≤–æ—Å—Ç–∏
    public func sendAnnouncement(_ announcement: T.Output) {
        publisher.send(announcement)
    }
    
    /// –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –º–∞—Ç—á–∞
    public func matchEnded() {
        publisher.send(completion: .finished)
    }
    
    /// –ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–∞—Ç—á–∞
    public func matchSuspended(withReason reason: LiveScoreError) {
        publisher.send(completion: .failure(reason))
    }
}
```
–î–æ–≤–æ–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–∞—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π —Ç–µ–º–æ–π. –ö–∞–∫ —Ç–æ–ª—å–∫–æ –º—ã —Å–æ–∑–¥–∞–¥–∏–º —ç–∫–∑–µ–º–ø–ª—è—Ä, –º—ã —Å–º–æ–∂–µ–º –≤—ã–ø—É—Å—Ç–∏—Ç—å –Ω–æ–≤—É—é –Ω–æ–≤–æ—Å—Ç—å, –≤—ã–∑–≤–∞–≤ –º–µ—Ç–æ–¥ `sendAnnouncement`. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –º—ã –º–æ–∂–µ–º —Å–∫–∞–∑–∞—Ç—å –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º, —á—Ç–æ –ø–æ–¥–ø–∏—Å–∫–∞ –∑–∞–∫–æ–Ω—á–∏–ª–∞—Å—å, –∏–ª–∏ –º—ã –º–æ–∂–µ–º –≤—ã–ø—É—Å—Ç–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫—É—é –æ—à–∏–±–∫—É, –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –±—ã–ª–æ –Ω–µ —Ç–∞–∫, –∏—Å–ø–æ–ª—å–∑—É—è –º–µ—Ç–æ–¥—ã `matchEnded` –∏ `matchSuspended`.

#### PassThroughSubject (–ü—Ä–æ–π—Ç–∏ —á–µ—Ä–µ–∑ –ø—Ä–µ–¥–º–µ—Ç)
–ß—Ç–æ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –¥–µ–ª–∞–µ—Ç PassThroughSubject, —Ç–∞–∫ —ç—Ç–æ –≤—ã–¥–∞–µ—Ç –Ω–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º –±–µ–∑ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–∞–∫–æ–≥–æ-–ª–∏–±–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–ª–∏ —Å–∞–º–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π.

```swift
let passThroughSubject = PassthroughSubject<String, LiveScoreError>()
let liveScore = LiveScore(publisher: passThroughSubject)
liveScore.publisher
    .sink { completion in
        switch completion {
        case .finished:
            print("–ú–∞—Ç—á –∑–∞–≤–µ—Ä—à–µ–Ω!")
        case .failure(let failure):
            print(failure.localizedDescription)
        }
    } receiveValue: { news in
        print(news)
    }

liveScore.sendAnnouncement("12' - ‚öΩÔ∏è –ú–∞–Ω—á–µ—Å—Ç–µ—Ä –Æ–Ω–∞–π—Ç–µ–¥ (–†–æ–Ω–∞–ª–¥—É)")
liveScore.sendAnnouncement("15' - üü® –¢–æ—Ç—Ç–µ–Ω—Ö—ç–º (–≠—Ä–∏–∫ –î–∞–π–µ—Ä)")
liveScore.sendAnnouncement("34' - üü® –ú–∞–Ω—á–µ—Å—Ç–µ—Ä –Æ–Ω–∞–π—Ç–µ–¥ (–°–∞–Ω—Ç–æ—Å)")
liveScore.sendAnnouncement("35' - ‚öΩÔ∏è –¢–æ—Ç—Ç–µ–Ω—Ö—ç–º (–ö–∏–Ω)")
liveScore.sendAnnouncement("38' - ‚öΩÔ∏è –ú–∞–Ω—á–µ—Å—Ç–µ—Ä –Æ–Ω–∞–π—Ç–µ–¥ (–†–æ–Ω–∞–ª–¥—É)")
liveScore.sendAnnouncement("–ü–æ–ª–æ–≤–∏–Ω–∞ —Ç–∞–π–º–∞")
liveScore.sendAnnouncement("72' - ‚öΩÔ∏è –¢–æ—Ç—Ç–µ–Ω—Ö—ç–º (–ú–∞–≥—É–∞–π—Ä - –ê–≤—Ç–æ–≥–æ–ª)")
liveScore.sendAnnouncement("81' - ‚öΩÔ∏è –ú–∞–Ω—á–µ—Å—Ç–µ—Ä –Æ–Ω–∞–π—Ç–µ–¥ (–†–æ–Ω–∞–ª–¥—É)")
liveScore.sendAnnouncement("85' - üü® –ú–∞–Ω—á–µ—Å—Ç–µ—Ä –Æ–Ω–∞–π—Ç–µ–¥ (–ü–æ–≥–±–∞)")
liveScore.matchEnded()

// 12' - ‚öΩÔ∏è –ú–∞–Ω—á–µ—Å—Ç–µ—Ä –Æ–Ω–∞–π—Ç–µ–¥ (–†–æ–Ω–∞–ª–¥—É)
// 15' - üü® –¢–æ—Ç—Ç–µ–Ω—Ö—ç–º (–≠—Ä–∏–∫ –î–∞–π–µ—Ä)
// 34' - üü® –ú–∞–Ω—á–µ—Å—Ç–µ—Ä –Æ–Ω–∞–π—Ç–µ–¥ (–°–∞–Ω—Ç–æ—Å)
// 35' - ‚öΩÔ∏è –¢–æ—Ç—Ç–µ–Ω—Ö—ç–º (–ö–∏–Ω)
// 38' - ‚öΩÔ∏è –ú–∞–Ω—á–µ—Å—Ç–µ—Ä –Æ–Ω–∞–π—Ç–µ–¥ (–†–æ–Ω–∞–ª–¥—É)
// –ü–æ–ª–æ–≤–∏–Ω–∞ —Ç–∞–π–º–∞
// 72' - ‚öΩÔ∏è –¢–æ—Ç—Ç–µ–Ω—Ö—ç–º (–ú–∞–≥—É–∞–π—Ä - –ê–≤—Ç–æ–≥–æ–ª)
// 81' - ‚öΩÔ∏è –ú–∞–Ω—á–µ—Å—Ç–µ—Ä –Æ–Ω–∞–π—Ç–µ–¥ (–†–æ–Ω–∞–ª–¥—É)
// 85' - üü® –ú–∞–Ω—á–µ—Å—Ç–µ—Ä –Æ–Ω–∞–π—Ç–µ–¥ (–ü–æ–≥–±–∞)
// –ú–∞—Ç—á –∑–∞–≤–µ—Ä—à–µ–Ω!
```

#### CurrentValueSubject (–¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞)
–≠—Ç–æ –æ—á–µ–Ω—å –ø–æ—Ö–æ–∂–µ –Ω–∞ PassThroughSubject —Å –∫–ª—é—á–µ–≤–æ–π —Ä–∞–∑–Ω–∏—Ü–µ–π, CurrentValueSubject —Ö—Ä–∞–Ω–∏—Ç —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏ –ø—É–±–ª–∏–∫—É–µ—Ç –µ–≥–æ –¥–ª—è –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ –≤—Å—è–∫–∏–π —Ä–∞–∑, –∫–æ–≥–¥–∞ —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –º–µ–Ω—è–µ—Ç—Å—è. –ü–æ—Å–∫–æ–ª—å–∫—É –æ–Ω —Ö—Ä–∞–Ω–∏—Ç —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –ª—é–±–æ–π –Ω–æ–≤—ã–π –ø–æ–¥–ø–∏—Å—á–∏–∫ –ø–æ–ª—É—á–∏—Ç —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –º–æ–º–µ–Ω—Ç –ø–æ–¥–ø–∏—Å–∫–∏.

–î—Ä—É–≥–æ–µ –æ—Ç–ª–∏—á–∏–µ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ CurrentValueSubject –∏–º–µ–µ—Ç –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, —Å –∫–æ—Ç–æ—Ä—ã–º –Ω–∞–º –Ω—É–∂–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å Subject.

```swift
let currentValueSubject = CurrentValueSubject<String, LiveScoreError>("–ú–∞—Ç—á –Ω–∞—á–∞–ª—Å—è!")
let liveScore = LiveScore(publisher: currentValueSubject)
liveScore.publisher
    .sink { completion in
        switch completion {
        case .finished:
            print("–ú–∞—Ç—á –∑–∞–≤–µ—Ä—à–µ–Ω!")
        case .failure(let failure):
            print(failure.localizedDescription)
        }
    } receiveValue: { news in
        print(news)
    }

liveScore.sendAnnouncement("1' - ‚öΩÔ∏è –†–µ–∞–ª –ú–∞–¥—Ä–∏–¥ (–ë–µ–Ω–∑–µ–º–∞)")
liveScore.sendAnnouncement("15' - üü® –ê—Ç–ª. –ú–∞–¥—Ä–∏–¥ (–°—É–∞—Ä–µ—Å)")
liveScore.sendAnnouncement("36' - üü• –ê—Ç–ª. –ú–∞–¥—Ä–∏–¥ (–ö–æ—Ä—Ä–µ–∞)")
liveScore.sendAnnouncement("–ü–æ–ª–æ–≤–∏–Ω–∞ —Ç–∞–π–º–∞")
liveScore.matchSuspended(withReason: .badWeather)

// –ú–∞—Ç—á –Ω–∞—á–∞–ª—Å—è!
// 1' - ‚öΩÔ∏è –†–µ–∞–ª –ú–∞–¥—Ä–∏–¥ (–ë–µ–Ω–∑–µ–º–∞)
// 15' - üü® –ê—Ç–ª. –ú–∞–¥—Ä–∏–¥ (–°—É–∞—Ä–µ—Å)
// 36' - üü• –ê—Ç–ª. –ú–∞–¥—Ä–∏–¥ (–ö–æ—Ä—Ä–µ–∞)
// –ü–æ–ª–æ–≤–∏–Ω–∞ —Ç–∞–π–º–∞
// –ò–≥—Ä–∞ –±—ã–ª–∞ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∏–∑-–∑–∞ –ø–ª–æ—Ö–∏—Ö –ø–æ–≥–æ–¥–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π
```


### @Published (–û–±–≤–µ—Ä—Ç–∫–∞ –ø—É–±–ª–∏–∫–∞—Ç–æ—Ä–∞)
–ò—Å–ø–æ–ª—å–∑—É—è –æ–±–µ—Ä—Ç–∫—É @Published –≤ –ª—é–±–æ–º —Å–≤–æ–π—Å—Ç–≤–µ, Combine –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç Publisher –¥–ª—è —ç—Ç–æ–≥–æ —Å–≤–æ–π—Å—Ç–≤–∞, –∏ –æ–Ω –±—É–¥–µ—Ç –≤—ã–¥–∞–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –≤—Å—è–∫–∏–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –∑–Ω–∞—á–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ –∏–∑–º–µ–Ω–∏—Ç—Å—è. –ú—ã –º–æ–∂–µ–º –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∏–∑–¥–∞—Ç–µ–ª—é —Å –ø–æ–º–æ—â—å—é –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ $.
–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —É –Ω–∞—Å –µ—Å—Ç—å, –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ @Published –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫–ª–∞—Å—Å–∞—Ö, –∞ –Ω–µ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ö.

```swift
class TrafficLight {
    public enum Light: String {
        case green = "üü¢"
        case yellow = "üü°"
        case red = "üî¥"
    }

    @Published public var currentLight: Light

    public init(light: Light) {
        self.currentLight = light
    }
}

let trafficLight = TrafficLight(light: .red)
trafficLight.$currentLight
    .sink { newLight in
        print(newLight.rawValue)
    }

trafficLight.currentLight = .green
trafficLight.currentLight = .yellow
trafficLight.currentLight = .red

// üî¥
// üü¢
// üü°
// üî¥
```

## –ò—Å—Ç–æ—á–Ω–∏–∫–∏:
- [Introduction to Combine framework in Swift](https://blorenzop.medium.com/introduction-to-combine-framework-in-swift-4e50ccd6afe2)
- [Swift Combine Publishers: An Overview](https://www.mikegopsill.com/posts/combine-publishers/)
- [Publishers & Subscribers](https://www.kodeco.com/books/combine-asynchronous-programming-with-swift/v2.0/chapters/2-publishers-subscribers)
