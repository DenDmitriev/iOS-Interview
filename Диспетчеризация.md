# Виды диспетчеризации
- Статическая или прямая отправка (Static or direct dispatch)
- Табличная или динамическая отправка (Table or dynamic dispatch)
- Отправка сообщений (Message dispatch)


## Прямая отправка
Прямая отправка — это самый быстрый способ отправки метода. Это не только приводит к наименьшему количеству инструкций ассемблера, но и компилятор может выполнять всевозможные хитрости, такие как встраивание кода и многие другие вещи, которые выходят за рамки этой статьи. Это часто называют статической отправкой.
Однако прямая диспетчеризация также является наиболее ограничительной с точки зрения программирования и недостаточно динамичной для поддержки создания подклассов.
 - Структуры (Value type Data type)
 - `static` и `final` (Reference type with this keyword)


## Отправка таблицы или динамическая отправка
Отправка таблиц — наиболее распространенная реализация динамического поведения в компилируемых языках. При отправке таблицы используется массив указателей функций для каждого метода в объявлении класса. В большинстве языков это называется «virtual table», но Swift использует термин «witness table» (таблица-свидетель). Каждый подкласс имеет собственную копию таблицы с разными указателями на функции для каждого метода, переопределенного классом.

```swift
class Parent {
    func method1() {}
    func method2() {}
}

class Child: Parent {
    override func method2() {}
    func method3() {}
}
```

![tableDispatch](https://github.com/DenDmitriev/iOS-Interview/assets/65191747/d731e9dc-d474-419b-a2d4-a41a16f33402)

Этот код создаст массив для адреса функции. По мере того, как подклассы добавляют в класс новые методы, эти методы добавляются в конец этого массива. Затем эта таблица просматривается во время выполнения, чтобы определить метод для запуска.

Однако этот метод отправки по-прежнему медленный по сравнению с прямой отправкой. С точки зрения байт-кода, есть два дополнительных чтения и переход, которые вносят некоторые накладные расходы. Однако еще одна причина, по которой это считается медленным, заключается в том, что компилятор не может выполнять какие-либо оптимизации в зависимости от того, что происходит внутри метода.
Одним из недостатков этой реализации на основе массива является то, что:
- расширения не могут расширять таблицу диспетчеризации. Поскольку подклассы добавляют новые методы в конец таблицы диспетчеризации, не существует индекса, к которому расширение могло бы безопасно добавить указатель на функцию.
