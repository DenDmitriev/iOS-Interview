# AnyPublisher
Бывают случаи, когда вы хотите, чтобы подписчики подписывались на получение событий от издателя, не имея возможности получить доступ к дополнительной информации об этом издателе.

Это лучше всего продемонстрировать на примере, поэтому добавьте этот новый на свою игровую площадку:
```swift
var subscriptions = Set<AnyCancellable>()

// Создайте PassthroughSubject
let subject = PassthroughSubject<Int, Never>()

// Создайте издателя c функцией стирания типа издателя.
let publisher = subject.eraseToAnyPublisher()

// Подпишитесь на издателя.
publisher
    .sink(receiveValue: { print($0) })
    .store(in: &subscriptions)

// Отправьте новое значение через проходной субъект.
subject.send(0)
```
Нажмите, удерживая клавишу Option, на publisher, и вы увидите, что он имеет тип AnyPublisher<Int, Never>.

<img width="630" alt="Снимок экрана 2024-02-29 в 09 29 35" src="https://github.com/DenDmitriev/iOS-Interview/assets/65191747/4e85119a-c05c-407d-a3a8-588b1b6615e1">

`AnyPublisher` - это стираемая типовая структура, которая соответствует протоколу Publisher. Функция `eraseToAnyPublisher()` возвращает тип `AnyPublisher<Self.Output, Self.Failure>` что позволяет вам скрыть сведения об издателе, которые вы, возможно, не захотите раскрывать подписчикам, или последущим издателям.

Ты сейчас испытываешь небольшое дежавю? Если это так, то это потому, что вы видели еще один случай стирания типа раньше. AnyCancellable - это класс стираемого типа, который соответствует Cancelable, который позволяет абонентам отменить подписку, не имея возможности получить доступ к базовой подписке, чтобы сделать такие вещи, как запрос большего количества элементов.

Одним из примеров того, когда вы хотите использовать стирание типа для издателя, является то, что вы хотите использовать пару публичных и частных свойств, чтобы позволить владельцу этих свойств отправлять значения частному издателю и позволить внешним абонентам получать доступ только к публичному издателю для подписки, но не иметь возможности отправлять значения.

AnyPublisher не имеет оператора send(_:), поэтому новые значения не могут быть добавлены к этому издателю.

Оператор eraseToAnyPublisher() обертывает предоставленного издателя в экземпляре AnyPublisher, скрывая тот факт, что издатель на самом деле является PassthroughSubject. Это также необходимо, потому что вы не можете специализировать протокол Publisher, например, вы не можете определить тип как Publisher<UIImage, Never>.

Чтобы доказать, что издатель стирается и не может быть использован для отправки новых значений, добавьте этот код в пример.
```swift
publisher.send(1)
```

Вы получаете ошибку "Value of type 'AnyPublisher<Int, Never>' has no member 'send'".
