# –û—Å–Ω–æ–≤—ã –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏
–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å ‚Äî —ç—Ç–æ –∞—Å–ø–µ–∫—Ç –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –ø—Ä–æ–≥—Ä–∞–º–º–µ –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ—Ç–æ–∫–∞—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ. –≠—Ç–æ —É–ª—É—á—à–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –ø–æ—Å–∫–æ–ª—å–∫—É –ø–æ–∑–≤–æ–ª—è–µ—Ç –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–µ –≤—Ä–µ–º—è –∏ –ø—Ä–æ–≤–æ–¥–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ.
–°—É—Ç—å –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏ ‚Äî —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –Ω–∞ –º–µ–Ω—å—à–∏–µ –∑–∞–¥–∞—á–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ. –û–¥–Ω–∞–∫–æ –≤–∞–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å, —á—Ç–æ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å –Ω–µ –≤—Å–µ–≥–¥–∞ —è–≤–ª—è–µ—Ç—Å—è –ø–∞–Ω–∞—Ü–µ–µ–π. –ò–Ω–æ–≥–¥–∞ –æ–Ω–∞ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Å–ª–æ–∂–Ω–æ—Å—Ç—è–º –≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏.

# –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å –≤ Swift
Swift –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏, —Ç–∞–∫–∏–µ –∫–∞–∫:
 - [Grand Central Dispatch (GCD)](#grand-central-dispatch)
 - [OperationQueue](#operationqueue)
 - [Await –∏ async](#await-–∏-async)
 - [NSLock](#nslock)
 - [–ò –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏, —Ç–∞–∫–∏–µ –∫–∞–∫ pthread –∏ NSThread](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-pthread-–∏-nsthread)

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ pthread –∏ NSThread

### pthread
POSIX Threads (pthread) ‚Äî —ç—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ—Ç–æ–∫–∞–º–∏ –≤ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö UNIX. pthread –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–∞–±–æ—Ä —Ñ—É–Ω–∫—Ü–∏–π –∏ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ—Ç–æ–∫–∞–º–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è. –•–æ—Ç—è pthread ‚Äî —ç—Ç–æ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –æ–Ω –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –≥–∏–±–∫–æ—Å—Ç—å –∏ –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –ø–æ—Ç–æ–∫–∞–º–∏.
–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ—Ç–æ–∫–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º pthread –≤ Swift, –≤–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:
```swift
import Foundation

var thread: pthread_t?

func startThread() {
    pthread_create(&thread, nil, threadFunction, nil)
}

func threadFunction(arg: UnsafeMutableRawPointer?) -> UnsafeMutableRawPointer? {
    // –ö–æ–¥, –≤—ã–ø–æ–ª–Ω—è–µ–º—ã–π –≤ –Ω–æ–≤–æ–º –ø–æ—Ç–æ–∫–µ
    return nil
}

func joinThread() {
    pthread_join(thread!, nil)
}
```
–î–∞–Ω–Ω—ã–π –∫–æ–¥ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ—Ç–æ–∫–∞ —Å –ø–æ–º–æ—â—å—é pthread_create(). –í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–≤–æ—é —Ñ—É–Ω–∫—Ü–∏—é –ø–æ—Ç–æ–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –≤ –Ω–æ–≤–æ–º –ø–æ—Ç–æ–∫–µ. –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Ç–æ–∫–∞ –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –Ω–µ–º—É —Å –ø–æ–º–æ—â—å—é pthread_join(), —á—Ç–æ–±—ã –¥–æ–∂–¥–∞—Ç—å—Å—è –µ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è.

### NSThread
NSThread ‚Äî —ç—Ç–æ –∫–ª–∞—Å—Å Objective-C, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ—Ç–æ–∫–∞–º–∏ –≤ iOS –∏ macOS. NSThread –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ pthread –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è, —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ—Ç–æ–∫–æ–≤.
–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è NSThread:
```swift
import Foundation

var thread: Thread?

func startThread() {
    thread = Thread(target: self, selector: #selector(threadFunction), object: nil)
    thread?.start()
}

@objc func threadFunction() {
    // –ö–æ–¥, –≤—ã–ø–æ–ª–Ω—è–µ–º—ã–π –≤ –Ω–æ–≤–æ–º –ø–æ—Ç–æ–∫–µ
}

func cancelThread() {
    thread?.cancel()
    thread = nil
}
```
–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–ª–∞—Å—Å Thread –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ—Ç–æ–∫–∞ –∏ —É–∫–∞–∑—ã–≤–∞–µ–º —Ü–µ–ª–µ–≤–æ–π –æ–±—ä–µ–∫—Ç (self) –∏ —Å–µ–ª–µ–∫—Ç–æ—Ä —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ—Ç–æ–∫–∞ (#selector(threadFunction)). –ó–∞—Ç–µ–º –º—ã –∑–∞–ø—É—Å–∫–∞–µ–º –ø–æ—Ç–æ–∫ —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ start(). –î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–æ—Ç–æ–∫–∞ –º—ã –≤—ã–∑—ã–≤–∞–µ–º –º–µ—Ç–æ–¥ cancel() –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ –ø–æ—Ç–æ–∫ –≤ nil.

### –í—ã–±–æ—Ä –º–µ–∂–¥—É pthread –∏ NSThread
–ü—Ä–∏ –≤—ã–±–æ—Ä–µ –º–µ–∂–¥—É pthread –∏ NSThread –≤–∞–∂–Ω–æ —É—á–∏—Ç—ã–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏. pthread –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–æ–ª–µ–µ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –¥–æ—Å—Ç—É–ø –∏ –±–æ–ª—å—à—É—é –≥–∏–±–∫–æ—Å—Ç—å, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Ç–æ–∫–∞–º–∏. NSThread, —Å –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã, –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å Objective-C, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –µ–≥–æ –±–æ–ª–µ–µ —É–¥–æ–±–Ω—ã–º –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.
–û–¥–Ω–∞–∫–æ —Å—Ç–æ–∏—Ç –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ –Ω–∞—á–∏–Ω–∞—è —Å iOS 10 –∏ macOS 10.12, Apple —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –ø–æ–¥—Ö–æ–¥—ã –∫ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏, —Ç–∞–∫–∏–µ –∫–∞–∫ Grand Central Dispatch (GCD) –∏ Operation Queues. –≠—Ç–∏ –ø–æ–¥—Ö–æ–¥—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –±–æ–ª–µ–µ —É–¥–æ–±–Ω—ã–π –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Å–ø–æ—Å–æ–± —Ä–∞–±–æ—Ç—ã —Å –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å—é, –æ—Å–æ–±–µ–Ω–Ω–æ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.
–í –∏—Ç–æ–≥–µ –≤—ã–±–æ—Ä –º–µ–∂–¥—É pthread –∏ NSThread –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–∞—à–∏—Ö –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π –∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π. –û–±–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –∏–º–µ—é—Ç —Å–≤–æ–∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏, –∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã–±–æ—Ä –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫–∏ –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.

## Grand Central Dispatch
Grand Central Dispatch (GCD) ‚Äî —ç—Ç–æ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è Apple, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–º–∏ –∑–∞–¥–∞—á–∞–º–∏ –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏. –í —Ü–µ–Ω—Ç—Ä–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ GCD –ª–µ–∂–∞—Ç –æ—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á –∏ –∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–æ—Ç–æ–∫–∞—Ö.

GCD –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–≤–∞ —Ç–∏–ø–∞ –æ—á–µ—Ä–µ–¥–µ–π: 
- —Å–µ—Ä–∏–π–Ω—ã–µ
- –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ
![375054988e062138330f94c556a32a13](https://github.com/DenDmitriev/iOS-Interview/assets/65191747/0db2ef02-8cab-4781-9775-488442a573e5)

### –°–µ—Ä–∏–π–Ω—ã–µ (Serial)
–æ—á–µ—Ä–µ–¥–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç –æ–¥–Ω—É –∑–∞–¥–∞—á—É –∑–∞ –¥—Ä—É–≥–æ–π. –ö–æ–≥–¥–∞ –æ–¥–Ω–∞ –∑–∞–¥–∞—á–∞ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è, –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∞—è. –≠—Ç–æ –æ—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω–æ, –∫–æ–≥–¥–∞ –≤—ã —Ö–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω—è–ª–∏—Å—å —Å—Ç—Ä–æ–≥–æ –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ. –≠—Ç–æ —Ç–∞–∫–∂–µ –ø–æ–º–æ–≥–∞–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –ø—Ä–æ–±–ª–µ–º —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –≥–æ–Ω–∫–∏, –ø–æ—Å–∫–æ–ª—å–∫—É –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ –≤ —Å–µ—Ä–∏–π–Ω–æ–π –æ—á–µ—Ä–µ–¥–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ –∑–∞–¥–∞—á–∞.
```swift
let serialQueue = DispatchQueue(label: "ru.app.serial-queue")
```

### –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ (Concurrent)
–æ—á–µ—Ä–µ–¥–∏ –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–¥–∞—á –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ. –ó–∞–¥–∞—á–∏ –Ω–∞—á–∏–Ω–∞—é—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –≤ —Ç–æ–º –ø–æ—Ä—è–¥–∫–µ, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–Ω–∏ –±—ã–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –æ—á–µ—Ä–µ–¥—å, –Ω–æ –æ–Ω–∏ –º–æ–≥—É—Ç –∑–∞–∫–æ–Ω—á–∏—Ç—å—Å—è –≤ –ª—é–±–æ–º –ø–æ—Ä—è–¥–∫–µ. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —Å–ª–µ–¥—É—é—â–∞—è –∑–∞–¥–∞—á–∞ –º–æ–∂–µ—Ç –Ω–∞—á–∞—Ç—å—Å—è –¥–∞–∂–µ –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ –ø—Ä–µ–¥—ã–¥—É—â–∞—è –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å.
```swift
let concurrentQueue = DispatchQueue(label: "ru.app.concurrent-queue", attributes: .concurrent)
```

### –û—á–µ—Ä–µ–¥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
–û—á–µ—Ä–µ–¥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ GCD ‚Äî —ç—Ç–æ –º–µ—Å—Ç–∞, –∫—É–¥–∞ –≤—ã –ø–æ–º–µ—â–∞–µ—Ç–µ –∑–∞–¥–∞—á–∏ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è. –í Swift —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Ç—Ä–∏ —Ç–∏–ø–∞ –æ—á–µ—Ä–µ–¥–µ–π.
1. –û—Å–Ω–æ–≤–Ω–∞—è –æ—á–µ—Ä–µ–¥—å (Main Queue). –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø–æ—Ç–æ–∫–µ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞. –≠—Ç–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ—á–µ—Ä–µ–¥—å.
```swift
let mainQueue = DispatchQueue.main
```
3. –ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ—á–µ—Ä–µ–¥—å (Global Queue). –≠—Ç–æ —Å–∏—Å—Ç–µ–º–Ω–∞—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–∞—è –æ—á–µ—Ä–µ–¥—å, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ. –≠—Ç–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ—á–µ—Ä–µ–¥—å, –∏ –æ–Ω–∞ –±—ã–≤–∞–µ—Ç —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞.
```swift
let globalQueue = DispatchQueue.global()
```
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –æ—á–µ—Ä–µ–¥—å (Custom Queue). –ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ—á–µ—Ä–µ–¥–∏. –≠—Ç–∏ –æ—á–µ—Ä–µ–¥–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–º–∏ –∏–ª–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–º–∏.
```swift
let customQueue = DispatchQueue(label: "com.example.queue")
```

### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏
GCD –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–¥–∞—á–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –∏–ª–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.
1. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Ç–µ–∫—É—â—É—é –æ—á–µ—Ä–µ–¥—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ, –Ω–µ –¥–æ–∂–∏–¥–∞—è—Å—å –∏—Ö –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è.
```swift
globalQueue.async {
    print("–í—ã–ø–æ–ª–Ω—è–µ–º –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –∑–∞–¥–∞—á—É")
}
```
2. –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, –ø–æ–∫–∞ –∑–∞–¥–∞—á–∞ –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∞.
```swift
globalQueue.sync {
    print("–í—ã–ø–æ–ª–Ω—è–µ–º —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –∑–∞–¥–∞—á—É")
}
```
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
–í–∞–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å, —á—Ç–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–æ–ª–∂–Ω–æ –≤—Å–µ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø–æ—Ç–æ–∫–µ.
```swift
DispatchQueue.global().async {
    // –§–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞
    let result = performHeavyTask()

    DispatchQueue.main.async {
        // –û–±–Ω–æ–≤–ª—è–µ–º UI –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø–æ—Ç–æ–∫–µ
        updateUIWithResult(result)
    }
}
```
–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –ø–æ—Å–ª–µ –∑–∞–¥–µ—Ä–∂–∫–∏
GCD –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π.
```swift
DispatchQueue.main.asyncAfter(deadline: .now() + 1.0) {
    // –í–∞—à –∫–æ–¥ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É
    print("–í—ã–ø–æ–ª–Ω–µ–Ω–æ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π")
}
```

### –ü–æ–≥–æ–≤–æ—Ä–∏–º –ø—Ä–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã GCD
Grand Central Dispatch (GCD) –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–π —Ä–∞–±–æ—Ç–æ–π.
1. –û—á–µ—Ä–µ–¥–∏ (Dispatch Queues). –≠—Ç–æ –æ—Å–Ω–æ–≤–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –∏–ª–∏ –≤ —Ä–∞–∑–Ω—ã—Ö –ø–æ—Ç–æ–∫–∞—Ö. –û—á–µ—Ä–µ–¥–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç –∑–∞–¥–∞—á–∏ –≤ FIFO-–ø–æ—Ä—è–¥–∫–µ (–ø–µ—Ä–≤—ã–π –ø—Ä–∏—à–µ–ª ‚Äî –ø–µ—Ä–≤—ã–π –æ–±—Å–ª—É–∂–µ–Ω). –û–Ω–∏ –º–æ–≥—É—Ç –±—ã—Ç—å —Å–µ—Ä–∏–π–Ω—ã–º–∏ (–≤—ã–ø–æ–ª–Ω—è—é—Ç –æ–¥–Ω—É –∑–∞–¥–∞—á—É –∑–∞ –¥—Ä—É–≥–æ–π) –∏–ª–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–º–∏ (–≤—ã–ø–æ–ª–Ω—è—é—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–¥–∞—á –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ).
```swift
// –°–æ–∑–¥–∞–Ω–∏–µ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ–æ–Ω–æ–≤–æ–π –æ—á–µ—Ä–µ–¥–∏ —Å –ø–æ—Å–ª–µ–¥—É—é—â–∏–º –≤–æ–∑–≤—Ä–∞—Ç–æ–º –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫:
let backgroundQueue = DispatchQueue.global(qos: .background)

backgroundQueue.async {
    // –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ —Ñ–æ–Ω–æ–≤–æ–º –ø–æ—Ç–æ–∫–µ
    print("This is run on the background queue")

    DispatchQueue.main.async {
        // –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–º –ø–æ—Ç–æ–∫–µ
        print("This is run on the main queue")
    }
}
```
2. –ì—Ä—É–ø–ø—ã (Dispatch Groups). –ü–æ–∑–≤–æ–ª—è—é—Ç —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞—á–∏ –∏ —É–≤–µ–¥–æ–º–∏—Ç—å –≤–∞—Å, –∫–æ–≥–¥–∞ –≤—Å–µ –∑–∞–¥–∞—á–∏ –≤ –≥—Ä—É–ø–ø–µ –∑–∞–≤–µ—Ä—à–µ–Ω—ã. –≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ, –∫–æ–≥–¥–∞ –≤–∞–º –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –Ω–∞–±–æ—Ä –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –∏ –¥–æ–∂–¥–∞—Ç—å—Å—è –∏—Ö –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è.
```swift
//–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á –∏ –æ–∂–∏–¥–∞–Ω–∏–µ –∏—Ö –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:
let group = DispatchGroup()

// –Ø–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –±–ª–æ–∫ –≤–æ—à–µ–ª –≤ –≥—Ä—É–ø–ø—É.
group.enter()
someAsyncFunction1() {
    // –Ø–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –±–ª–æ–∫ –≤ –≥—Ä—É–ø–ø–µ –∑–∞–≤–µ—Ä—à–∏–ª –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ.
    group.leave()
}

group.enter()
someAsyncFunction2() {
    group.leave()
}

group.notify(queue: .main) {
    print("All async tasks have completed")
}
```
3. –°–µ–º–∞—Ñ–æ—Ä—ã (Dispatch Semaphores). –°–µ–º–∞—Ñ–æ—Ä—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –º–µ—Ö–∞–Ω–∏–∑–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–ª—è —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ –æ–±—â–∏–º —Ä–µ—Å—É—Ä—Å–∞–º.
```swift
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–µ–º–∞—Ñ–æ—Ä–∞ –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –æ–±—â–µ–º—É —Ä–µ—Å—É—Ä—Å—É:

let semaphore = DispatchSemaphore(value: 1)  // –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ 1
var data = SharedResource()

DispatchQueue.global().async {
    semaphore.wait()  // —É–º–µ–Ω—å—à–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ —Å–µ–º–∞—Ñ–æ—Ä–∞
    // –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —Å–µ–∫—Ü–∏—è
    data.modify()
    semaphore.signal()  // —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ —Å–µ–º–∞—Ñ–æ—Ä–∞
}
```
4. –ò—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø (Dispatch Barriers). –ë–∞—Ä—å–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ—á–µ–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤–Ω—É—Ç—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –æ—á–µ—Ä–µ–¥–µ–π. –ë–∞—Ä—å–µ—Ä–Ω–∞—è –∑–∞–¥–∞—á–∞ –±—É–¥–µ—Ç –∂–¥–∞—Ç—å, –ø–æ–∫–∞ –≤—Å–µ –∑–∞–¥–∞—á–∏, –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –≤ –æ—á–µ—Ä–µ–¥—å –¥–æ –±–∞—Ä—å–µ—Ä–∞, –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω—ã, –ø–æ—Å–ª–µ —á–µ–≥–æ –æ–Ω–∞ —Å–∞–º–∞ –Ω–∞—á–Ω–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è. –í—Å–µ –∑–∞–¥–∞—á–∏, –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –ø–æ—Å–ª–µ –±–∞—Ä—å–µ—Ä–∞, –±—É–¥—É—Ç –∂–¥–∞—Ç—å, –ø–æ–∫–∞ –±–∞—Ä—å–µ—Ä–Ω–∞—è –∑–∞–¥–∞—á–∞ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è.
```swift
//–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–∞—Ä—å–µ—Ä–æ–≤ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —á—Ç–µ–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏ –≤ –æ–±—â–∏–π —Ä–µ—Å—É—Ä—Å:
let queue = DispatchQueue(label: "com.example.myqueue", attributes: .concurrent)
var data = SharedResource()

queue.async {
    data.read()
}

queue.async(flags: .barrier) {
    data.write()
}

queue.async {
    data.read()
}
```
5. –ò—Å—Ç–æ—á–Ω–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π (Dispatch Sources). –≠—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ —Å–æ–±—ã—Ç–∏–π –Ω–∞ –Ω–∏–∑–∫–æ–º —É—Ä–æ–≤–Ω–µ.
Dispatch Sources –≤ GCD ‚Äî —ç—Ç–æ –º–æ—â–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π. –ü—Ä–∏–º–µ—Ä–æ–º —Ç–∞–∫–æ–≥–æ —Å–æ–±—ã—Ç–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Ñ–∞–π–ª–∞, –≤—Ö–æ–¥—è—â–∏–π —Å–µ—Ç–µ–≤–æ–π –ø–∞–∫–µ—Ç, —Å–∏–≥–Ω–∞–ª Unix –∏ —Ç.–¥.
–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Dispatch Sources –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–∞:
```swift
// –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —Ö–æ—Ç–∏—Ç–µ –Ω–∞–±–ª—é–¥–∞—Ç—å
let path = "/path/to/file"

// –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–∞ —Ñ–∞–π–ª–∞
let fileDescriptor = open(path, O_EVTONLY)

if fileDescriptor != -1 {
    // –°–æ–∑–¥–∞–Ω–∏–µ Dispatch Source
    let source = DispatchSource.makeFileSystemObjectSource(fileDescriptor: fileDescriptor, eventMask: .write, queue: DispatchQueue.global())

    // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Å–æ–±—ã—Ç–∏—è
    source.setEventHandler {
        // –ö–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω, –∫–æ–≥–¥–∞ —Ñ–∞–π–ª –∏–∑–º–µ–Ω–∏—Ç—Å—è
        print("\(path) has changed.")
    }

    // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –æ—Ç–º–µ–Ω—ã
    source.setCancelHandler {
        close(fileDescriptor)
    }

    // –ó–∞–ø—É—Å–∫ Dispatch Source
    source.resume()
} else {
    print("Unable to open path: \(path)")
}
```
–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è Dispatch Source, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–±–ª—é–¥–∞–µ—Ç –∑–∞ –∑–∞–ø–∏—Å—å—é –≤ —Ñ–∞–π–ª. –ö–æ–≥–¥–∞ —Ñ–∞–π–ª –∏–∑–º–µ–Ω—è–µ—Ç—Å—è, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è. –ö–æ–≥–¥–∞ Dispatch Source –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è, –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä —Ñ–∞–π–ª–∞ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è.
–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ —ç—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ø—Ä–æ—Å—Ç—É—é –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—é –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π Dispatch Sources. –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –≤–∞–º —Å–ª–µ–¥—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—à–∏–±–∫–∏ –±–æ–ª–µ–µ —Ç—â–∞—Ç–µ–ª—å–Ω–æ –∏ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ —É–ø—Ä–∞–≤–ª—è–µ—Ç–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏ —Å–∏—Å—Ç–µ–º—ã.

6. –û—á–µ—Ä–µ–¥–∏ —Ç–∞–π–º–µ—Ä–æ–≤ (Dispatch Timers). –≠—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–π–º–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç –∫–æ–¥ –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è –∏–ª–∏ –≤ –∑–∞–¥–∞–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –≤—Ä–µ–º–µ–Ω–∏.
```swift
// –ü—Ä–∏–º–µ—Ä —Ç–∞–π–º–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç –±–ª–æ–∫ –∫–æ–¥–∞ –∫–∞–∂–¥—ã–µ –¥–≤–µ —Å–µ–∫—É–Ω–¥—ã:

// –°–æ–∑–¥–∞–Ω–∏–µ Dispatch Timer
let timer = DispatchSource.makeTimerSource(queue: DispatchQueue.global())

// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–∞–π–º–µ—Ä–∞ –Ω–∞ –ø–æ–≤—Ç–æ—Ä –∫–∞–∂–¥—ã–µ –¥–≤–µ —Å–µ–∫—É–Ω–¥—ã
timer.schedule(deadline: .now(), repeating: .seconds(2))

// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Å–æ–±—ã—Ç–∏—è
timer.setEventHandler {
    print("Timer fired at \(Date())")
}

// –ó–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä–∞
timer.resume()

// –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–∞–π–º–µ—Ä, –≤—ã –º–æ–∂–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ, –≤—ã–∑–≤–∞–≤ –º–µ—Ç–æ–¥ cancel():

timer.cancel()
```

–í–∞–∂–Ω–æ –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –º–æ—â—å –∏ –≥–∏–±–∫–æ—Å—Ç—å —ç—Ç–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ–≥–¥–∞ —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ –∏ –¥–∞–Ω–Ω—ã–º–∏, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø—Ä–æ–±–ª–µ–º —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –≥–æ–Ω–∫–∏.

Grand Central Dispatch ‚Äî –º–æ—â–Ω—ã–π –∏ –≥–∏–±–∫–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å—é –≤ Swift. –° –µ–≥–æ –ø–æ–º–æ—â—å—é –≤—ã —Å–º–æ–∂–µ—Ç–µ —É–ª—É—á—à–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç—å –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## –ü—Ä–æ–±–ª–µ–º—ã, –≤—Å—Ç—Ä–µ—á–∞—é—â–∏–µ—Å—è –≤ GCD
–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ–≥–¥–∞ —Å–≤—è–∑–∞–Ω–æ —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º–∏ –ø—Ä–æ–±–ª–µ–º–∞–º–∏ –∏ —Å–ª–æ–∂–Ω–æ—Å—Ç—è–º–∏, –∏ Grand Central Dispatch (GCD) –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º. –î–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–±–ª–µ–º, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ GCD.

### Deadlock (–≤–∑–∞–∏–º–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞)
Deadlock –≤–æ–∑–Ω–∏–∫–∞–µ—Ç, –∫–æ–≥–¥–∞ –¥–≤–∞ –∏–ª–∏ –±–æ–ª–µ–µ –ø–æ—Ç–æ–∫–∞ –Ω–∞–≤—Å–µ–≥–¥–∞ –±–ª–æ–∫–∏—Ä—É—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞, –æ–∂–∏–¥–∞—è —Ä–µ—Å—É—Ä—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —É–¥–µ—Ä–∂–∏–≤–∞—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –≤—ã –≤—ã–∑—ã–≤–∞–µ—Ç–µ sync –Ω–∞ —Ç–µ–∫—É—â–µ–π –æ—á–µ—Ä–µ–¥–∏, —ç—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ deadlock.

![73da61617ccb507f23e614c419330d7e](https://github.com/DenDmitriev/iOS-Interview/assets/65191747/85af0ad2-795b-41e3-8e92-c36cd1d6477c)

```swift
DispatchQueue.main.sync {
    // –≠—Ç–æ—Ç –±–ª–æ–∫ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è, —Ç–∞–∫ –∫–∞–∫ –≤—ã–∑–æ–≤ `sync`
    // –±—É–¥–µ—Ç –∂–¥–∞—Ç—å, –ø–æ–∫–∞ –±–ª–æ–∫ –Ω–µ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è, –∞ –±–ª–æ–∫ –±—É–¥–µ—Ç –∂–¥–∞—Ç—å, 
    // –ø–æ–∫–∞ `sync` –Ω–µ –≤–µ—Ä–Ω–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ.
}
```

```swift
let dispatchQueue = DispatchQueue(label: "com.example.serial.queue")
dispatchQueue.async {
    dispatchQueue.sync { // deadlock
        print("üëæ")
    }
}
```

### Race conditions (—É—Å–ª–æ–≤–∏—è –≥–æ–Ω–∫–∏)

![ffb7f09ca047094a38220648bd7d394d](https://github.com/DenDmitriev/iOS-Interview/assets/65191747/daea3895-e531-45ca-83b8-66adc547799d)

–£—Å–ª–æ–≤–∏—è –≥–æ–Ω–∫–∏ –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å, –∫–æ–≥–¥–∞ –¥–≤–∞ –∏–ª–∏ –±–æ–ª–µ–µ –ø–æ—Ç–æ–∫–∞ –∏–º–µ—é—Ç –¥–æ—Å—Ç—É–ø –∫ –æ–±—â–µ–º—É —Ä–µ—Å—É—Ä—Å—É –∏ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –∏–∑ –Ω–∏—Ö –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–ø–∏—Å—å. –ï—Å–ª–∏ –ø–æ—Ä—è–¥–æ–∫ –∑–∞–ø–∏—Å–∏ –≤–∞–∂–µ–Ω, —ç—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º.

```swift
var counter = 0
let queue = DispatchQueue(label: "com.example.myqueue", attributes: .concurrent)

for _ in 0..<1000 {
    queue.async {
        Thread.sleep(forTimeInterval: 1) // –≠–º—É–ª—è—Ü–∏—è –∑–∞—Ç—Ä–∞—Ç–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏
        counter += 1
    }
}

print(counter) // 0
/*
  –ò–∑-–∑–∞ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–∏ –º–µ–∂–¥—É –ø–æ—Ç–æ–∫–∞–º–∏, —Ç–æ—á–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ counter –º–æ–∂–µ—Ç
  –±—ã—Ç—å –º–µ–Ω—å—à–µ 1000 –∏–∑-–∑–∞ –ø–æ—Ç–µ—Ä–∏ –∏–ª–∏ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–æ–≤.
  –û–ø–µ—Ä–∞—Ü–∏—è counter += 1 —è–≤–ª—è–µ—Ç—Å—è –∞—Ç–æ–º–∞—Ä–Ω–æ–π –∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –µ–≥–æ –Ω–∞ 1,
  –ø–æ—ç—Ç–æ–º—É —á–∏—Å–ª–æ –Ω–µ –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º.
*/
```

### Priority inversion (–æ–±—Ä–∞—Ç–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞)

![40608f06beefd84820abfabbf0856583](https://github.com/DenDmitriev/iOS-Interview/assets/65191747/b89bcb67-1e69-4f95-9593-c94d5640cfa6)

Priority inversion –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –∫–æ–≥–¥–∞ –ø–æ—Ç–æ–∫ —Å –±–æ–ª–µ–µ –Ω–∏–∑–∫–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–µ—Å—É—Ä—Å, –∫–æ—Ç–æ—Ä—ã–π —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ—Ç–æ–∫—É —Å –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º. –≠—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —Ç–æ–º—É, —á—Ç–æ –ø–æ—Ç–æ–∫–∏ —Å –≤—ã—Å–æ–∫–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –±—É–¥—É—Ç –æ–∂–∏–¥–∞—Ç—å, –ø–æ–∫–∞ –ø–æ—Ç–æ–∫–∏ —Å –Ω–∏–∑–∫–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –æ—Å–≤–æ–±–æ–¥—è—Ç —Ä–µ—Å—É—Ä—Å—ã, —á—Ç–æ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—Ç –æ–∂–∏–¥–∞–µ–º–æ–º—É –ø–æ–≤–µ–¥–µ–Ω–∏—é.
```swift
let highPriority = DispatchQueue.global(qos: .userInitiated)
let lowPriority = DispatchQueue.global(qos: .background)

let semaphore = DispatchSemaphore(value: 1)

lowPriority.async {
    semaphore.wait()
    Thread.sleep(forTimeInterval: 2) // –≠–º—É–ª—è—Ü–∏—è –∑–∞—Ç—Ä–∞—Ç–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏
    print("ü™´")
    semaphore.signal()
}

highPriority.async {
    semaphore.wait()
    // –≠—Ç–æ—Ç –±–ª–æ–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω –±—ã—Å—Ç—Ä–æ,
    // –Ω–æ –æ–Ω –¥–æ–ª–∂–µ–Ω –∂–¥–∞—Ç—å, –ø–æ–∫–∞ –Ω–∏–∑–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –∑–∞–¥–∞—á–∞ –Ω–µ –æ—Å–≤–æ–±–æ–¥–∏—Ç —Å–µ–º–∞—Ñ–æ—Ä
    print("üîã")
    semaphore.signal()
}
/// ü™´
/// üîã
```

### Resource starvation (–∏—Å—Ç–æ—â–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤)

Resource starvation –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –∫–æ–≥–¥–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–æ—Ç–æ–∫–∏ –Ω–µ –ø–æ–ª—É—á–∞—é—Ç –¥–æ—Å—Ç—É–ø –∫ —Ä–µ—Å—É—Ä—Å–∞–º, –ø–æ—Ç–æ–º—É —á—Ç–æ –¥—Ä—É–≥–∏–µ –ø–æ—Ç–æ–∫–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –∏—Ö –∑–∞–Ω–∏–º–∞—é—Ç. –≠—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –≤—ã —Å–æ–∑–¥–∞–µ—Ç–µ –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞—á —Å –≤—ã—Å–æ–∫–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–Ω–∏–º–∞—é—Ç –≤—Å–µ –ø–æ—Ç–æ–∫–∏ –≤ –ø—É–ª–µ –ø–æ—Ç–æ–∫–æ–≤, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Ç–æ–º—É, —á—Ç–æ –∑–∞–¥–∞—á–∏ —Å –Ω–∏–∑–∫–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –Ω–µ –ø–æ–ª—É—á–∞—é—Ç —à–∞–Ω—Å–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è.

–≠—Ç–∏ –ø—Ä–æ–±–ª–µ–º—ã —è–≤–ª—è—é—Ç—Å—è –æ–±—â–∏–º–∏ –¥–ª—è –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, –∏ –≤–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å –∏—Ö –∏ —É–º–µ—Ç—å —Å –Ω–∏–º–∏ —Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ GCD. –•–æ—Ä–æ—à–æ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É—á–∏—Ç—ã–≤–∞–µ—Ç —ç—Ç–∏ –ø—Ä–æ–±–ª–µ–º—ã –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–ª—è –∏—Ö –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏.

## OperationQueue
![22ca3fc1d03e927b9224e1a78251ee20](https://github.com/DenDmitriev/iOS-Interview/assets/65191747/161c8d7f-9765-4ac8-aa47-7e7564f0e4ba)

–û–¥–Ω–æ–π –∏–∑ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∑–∞–¥–∞—á –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —è–≤–ª—è–µ—Ç—Å—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–Ω–æ–≥–æ—è–¥–µ—Ä–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤. Swift –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–æ—Å–æ–±–æ–≤ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á –≤ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–∞—Ö, –æ–¥–Ω–∏–º –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö —è–≤–ª—è–µ—Ç—Å—è OperationQueue.

### –í–≤–µ–¥–µ–Ω–∏–µ –≤ OperationQueue
OperationQueue ‚Äî —ç—Ç–æ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—á–µ—Ä–µ–¥—è–º–∏ —Ä–∞–±–æ—Ç –≤ Swift –∏ Objective-C, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –Ω–∞ –æ—Å–Ω–æ–≤–µ Grand Central Dispatch (GCD). OperationQueue –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –±–æ–ª—å—à—É—é –≥–∏–±–∫–æ—Å—Ç—å –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å GCD –∑–∞ —Å—á–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ç–º–µ–Ω—ã –æ–ø–µ—Ä–∞—Ü–∏–π, —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–µ–∂–¥—É –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—á–µ—Ä–µ–¥—å—é –æ–ø–µ—Ä–∞—Ü–∏–π.
#### –°–æ–∑–¥–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
```swift
// –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é –æ–ø–µ—Ä–∞—Ü–∏—é
let operation = BlockOperation {
    print("Hello from operation!")
}

// –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é –æ—á–µ—Ä–µ–¥—å –æ–ø–µ—Ä–∞—Ü–∏–π
let queue = OperationQueue()

// –î–æ–±–∞–≤–ª—è–µ–º –æ–ø–µ—Ä–∞—Ü–∏—é –≤ –æ—á–µ—Ä–µ–¥—å
queue.addOperation(operation)
```
#### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–π
–û–¥–Ω–∏–º –∏–∑ –∫–ª—é—á–µ–≤—ã—Ö –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è OperationQueue —è–≤–ª—è–µ—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –í—ã –º–æ–∂–µ—Ç–µ —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ—Ä—è–¥–∫–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—è –æ–¥–Ω—É –æ–ø–µ—Ä–∞—Ü–∏—é –∑–∞–≤–∏—Å–∏–º–æ–π –æ—Ç –¥—Ä—É–≥–æ–π.
```swift
let secondOperation = BlockOperation {
    Thread.sleep(forTimeInterval: 1)
    print("Second operation")
}

let firstOperation = BlockOperation {
    print("First operation")
}

secondOperation.addDependency(firstOperation)

let queue = OperationQueue()
queue.addOperations([firstOperation, secondOperation], waitUntilFinished: false)
/// First operation
/// Second operation
```
#### –û—Ç–º–µ–Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏–π
–ï—â–µ –æ–¥–Ω–æ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è OperationQueue ‚Äî —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–º–µ–Ω—ã –æ–ø–µ—Ä–∞—Ü–∏–π. –í—ã –º–æ–∂–µ—Ç–µ –æ—Ç–º–µ–Ω–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏–ª–∏ –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ –æ—á–µ—Ä–µ–¥–∏.
```swift
let operation = BlockOperation {
    print("Operation started")
    Thread.sleep(forTimeInterval: 2)
    print("Operation finished")
}

let queue = OperationQueue()
queue.addOperation(operation)

// –û—Ç–º–µ–Ω–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é
operation.cancel()
```

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞
–ï—â–µ –æ–¥–Ω–æ–π –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å—é OperationQueue —è–≤–ª—è–µ—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç–µ–ø–µ–Ω—å—é –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞ –æ–ø–µ—Ä–∞—Ü–∏–π, —Ç–æ –µ—Å—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –æ–ø–µ—Ä–∞—Ü–∏–π, –≤—ã–ø–æ–ª–Ω—è–µ–º—ã—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.
```swift
let serialQueue = OperationQueue()

// –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–π, –≤—ã–ø–æ–ª–Ω—è–µ–º—ã—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, –¥–æ 1 –∏–ª–∏ —Å–µ—Ä–∏–π–Ω–∞—è –æ—á–µ—Ä–µ–¥—å
serialQueue.maxConcurrentOperationCount = 1

let queue = OperationQueue()

// –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–π, –≤—ã–ø–æ–ª–Ω—è–µ–º—ã—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, –¥–æ 2
queue.maxConcurrentOperationCount = 2
```

### –í—Å—Ç—Ä–µ—á–∞—é—â–∏–µ—Å—è –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ OperationQueue:

1. **–û—Ç–º–µ–Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏–π.** –•–æ—Ç—è OperationQueue –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –æ—Ç–º–µ–Ω—ã –æ–ø–µ—Ä–∞—Ü–∏–π, –≤–∞–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å, —á—Ç–æ –æ–ø–µ—Ä–∞—Ü–∏—è –Ω–µ –ø—Ä–µ–∫—Ä–∞—â–∞–µ—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ, –∫–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –º–µ—Ç–æ–¥ cancel(). –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ —Å—Ç–∞—Ç—É—Å isCancelled —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ true, –∏ –≤–∞—à –∫–æ–¥ –¥–æ–ª–∂–µ–Ω —Ä–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —ç—Ç–æ—Ç —Å—Ç–∞—Ç—É—Å –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ.
2. **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–π.** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –º–µ–∂–¥—É –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —Å–ª–æ–∂–Ω—ã–º —Å—Ü–µ–Ω–∞—Ä–∏—è–º, –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Ü–∏–∫–ª–∏—á–µ—Å–∫–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å (–æ–ø–µ—Ä–∞—Ü–∏—è A –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ B, –∞ –æ–ø–µ—Ä–∞—Ü–∏—è B –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ A), —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ deadlock.
3. **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π.** –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é Operation –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–æ—Å—Ç–æ–≥–æ —Å–ø–æ—Å–æ–±–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏–ª–∏ –ø–æ–ª—É—á–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –µ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏. –≠—Ç–æ –º–æ–∂–Ω–æ —Ä–µ—à–∏—Ç—å –ø—É—Ç–µ–º –ø–æ–¥–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ Operation –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–∞–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ, –Ω–æ —ç—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã.
–í—ã–≤–æ–¥: OperationQueue —è–≤–ª—è–µ—Ç—Å—è –º–æ—â–Ω—ã–º –∏ –≥–∏–±–∫–∏–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ –≤ Swift. –ï–≥–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–µ–ª–∞—é—Ç –µ–≥–æ –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω—ã–º –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤, –≥–¥–µ –Ω—É–∂–Ω–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –æ—Ç–º–µ–Ω—É –∏–ª–∏ —Å—Ç–µ–ø–µ–Ω—å –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞ –æ–ø–µ—Ä–∞—Ü–∏–π.

## NSLock
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º –∫ –æ–±—â–∏–º —Ä–µ—Å—É—Ä—Å–∞–º

![4a32d120664fb748d71f482c3190b52f](https://github.com/DenDmitriev/iOS-Interview/assets/65191747/a0016f9d-aeec-4847-88d2-96a0a8dcdab5)

–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å —Å–ª–æ–∂–Ω—ã–º, –æ—Å–æ–±–µ–Ω–Ω–æ –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø –∫ –æ–±—â–∏–º —Ä–µ—Å—É—Ä—Å–∞–º. –í Swift –∏ Objective-C –¥–ª—è —ç—Ç–æ–≥–æ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç NSLock, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ø—Ä–∏–º–∏—Ç–∏–≤ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–π –≤–∑–∞–∏–º–æ–∏—Å–∫–ª—é—á–∞—é—â–∏–π –¥–æ—Å—Ç—É–ø –∫ –æ–±—â–∏–º —Ä–µ—Å—É—Ä—Å–∞–º.
### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç NSLock
NSLock —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –¥–≤–µ—Ä–Ω–æ–π –∑–∞–º–æ–∫: —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø–æ—Ç–æ–∫ –º–æ–∂–µ—Ç ¬´–∑–∞–∫–ª—é—á–∏—Ç—å¬ª –µ–≥–æ –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏. –ü–æ–∫–∞ –∑–∞–º–æ–∫ –∑–∞–∫—Ä—ã—Ç, –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ—Ç–æ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø—ã—Ç–∞—é—Ç—Å—è –µ–≥–æ –∑–∞–∫—Ä—ã—Ç—å, –±—É–¥—É—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –∑–∞–º–æ–∫ –Ω–µ –±—É–¥–µ—Ç –æ—Ç–∫—Ä—ã—Ç.
```swift
let lock = NSLock()
var data = [String]()

DispatchQueue.global().async {
    lock.lock()
    data.append("Write data")
    lock.unlock()
}

DispatchQueue.global().async {
    lock.lock()
    print(data)
    lock.unlock()
}
```
–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å NSLock
NSLock –ø–æ–ª–µ–∑–µ–Ω –≤ —Å–∏—Ç—É–∞—Ü–∏—è—Ö, –∫–æ–≥–¥–∞ –≤–∞–º –Ω—É–∂–Ω–æ –∑–∞—â–∏—Ç–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫—É—é —Å–µ–∫—Ü–∏—é –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä–∞—è –æ–±–Ω–æ–≤–ª—è–µ—Ç –æ–±—â–∏–π —Ä–µ—Å—É—Ä—Å, —Ç–∞–∫–æ–π –∫–∞–∫ –æ–±—â–∏–π –æ–±—ä–µ–∫—Ç –∏–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö. –û–¥–Ω–∞–∫–æ NSLock —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ, —Ç–∞–∫ –∫–∞–∫ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —Ç–∞–∫–∏–º –ø—Ä–æ–±–ª–µ–º–∞–º, –∫–∞–∫ –≤–∑–∞–∏–º–Ω—ã–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∏–ª–∏ —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏.
### –ü—Ä–æ–±–ª–µ–º—ã, –≤–æ–∑–Ω–∏–∫–∞—é—â–∏–µ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ NSLock
1. Deadlock. –ï—Å–ª–∏ –ø–æ—Ç–æ–∫ –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–∫—Ä—ã—Ç—å –∑–∞–º–æ–∫, –∫–æ—Ç–æ—Ä—ã–π –æ–Ω —É–∂–µ –∑–∞–∫—Ä—ã–ª, –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç deadlock. –í–æ—Ç –ø—Ä–∏–º–µ—Ä, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â–∏–π —ç—Ç–æ:
```swift
let lock = NSLock()

DispatchQueue.global().async {
    lock.lock()
    print("First lock acquired")
    
    lock.lock() // Deadlock
    print("Second lock acquired")
}
```
–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –≤—Ç–æ—Ä–æ–π –≤—ã–∑–æ–≤ lock() –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ deadlock, –ø–æ—Å–∫–æ–ª—å–∫—É –∑–∞–º–æ–∫ —É–∂–µ –∑–∞–∫—Ä—ã—Ç —ç—Ç–∏–º –ø–æ—Ç–æ–∫–æ–º.

2. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–π. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –¥—Ä—É–≥–∏—Ö –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏, —Ç–∞–∫–∏—Ö –∫–∞–∫ NSRecursiveLock, NSLock –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è, –µ—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞, —Ç–∞–∫–∞—è –∫–∞–∫ –ø–æ–ø—ã—Ç–∫–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞—Ö–≤–∞—Ç–∞ –∑–∞–º–∫–∞, –∫–æ—Ç–æ—Ä—ã–π —É–∂–µ –∑–∞–∫—Ä—ã—Ç. –≠—Ç–æ –º–æ–∂–µ—Ç —É—Å–ª–æ–∂–Ω–∏—Ç—å –æ—Ç–ª–∞–¥–∫—É –ø—Ä–æ–±–ª–µ–º.
3. –£—Ç–µ—á–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤. –ï—Å–ª–∏ –ø–æ—Ç–æ–∫, –∑–∞–∫—Ä—ã–≤—à–∏–π –∑–∞–º–æ–∫, –ø–æ –∫–∞–∫–æ–π-—Ç–æ –ø—Ä–∏—á–∏–Ω–µ –Ω–µ –º–æ–∂–µ—Ç –µ–≥–æ –æ—Ç–∫—Ä—ã—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä –∏–∑-–∑–∞ –æ—à–∏–±–∫–∏ –∏–ª–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è), —Ç–æ –∑–∞–º–æ–∫ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –∑–∞–∫—Ä—ã—Ç—ã–º –Ω–∞–≤—Å–µ–≥–¥–∞, –∏ –¥—Ä—É–≥–∏–µ –ø–æ—Ç–æ–∫–∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Å–º–æ–≥—É—Ç –µ–≥–æ –∑–∞–∫—Ä—ã—Ç—å. –≠—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ —É—Ç–µ—á–∫–µ —Ä–µ—Å—É—Ä—Å–æ–≤.
4. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞. NSLock –Ω–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –¥–ª—è –ø–æ—Ç–æ–∫–æ–≤. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤—Å–µ –ø–æ—Ç–æ–∫–∏, –æ–∂–∏–¥–∞—é—â–∏–µ –∑–∞–∫—Ä—ã—Ç–∏—è –∑–∞–º–∫–∞, –ø–æ–ª—É—á–∞—é—Ç –¥–æ—Å—Ç—É–ø –∫ –Ω–µ–º—É –≤ –ø–æ—Ä—è–¥–∫–µ –ø—Ä–∏—Ö–æ–¥–∞, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∏—Ö –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞.
–í—ã–≤–æ–¥: NSLock ‚Äî —ç—Ç–æ –ø–æ–ª–µ–∑–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –æ–±—â–∏–º —Ä–µ—Å—É—Ä—Å–∞–º –≤ Swift –∏ Objective-C. –û–¥–Ω–∞–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–º–Ω–∏—Ç—å –æ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é.

## Await –∏ async
![70ee962864b1da9e2e395d70ead51e1c](https://github.com/DenDmitriev/iOS-Interview/assets/65191747/93ab28f1-54a0-40e3-b257-53f325b6ca09)

–° –ø–æ—è–≤–ª–µ–Ω–∏–µ–º Swift 5.5 Apple –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–ª–∞ –Ω–æ–≤—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ ‚Äî async –∏ await, –∫–æ—Ç–æ—Ä—ã–µ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ø—Ä–æ—â–∞—é—Ç —Ä–∞–±–æ—Ç—É —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ –∏ –¥–µ–ª–∞—é—Ç –∫–æ–¥ –±–æ–ª–µ–µ —á–∏—Ç–∞–µ–º—ã–º.

### –ü–æ–Ω–∏–º–∞–Ω–∏–µ async/await
Async –∏ await ‚Äî —ç—Ç–æ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞, –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –≤ Swift 5.5 –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞. Async —É–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è, –º–µ—Ç–æ–¥ –∏–ª–∏ –∑–∞–º—ã–∫–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, —Ç–æ –µ—Å—Ç—å –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ –∏ –∑–∞–≤–µ—Ä—à–∞—Ç—å—Å—è –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è. Await –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—è —Ç–æ—á–µ–∫ –≤ –∫–æ–¥–µ, –≥–¥–µ –≤—ã –æ–∂–∏–¥–∞–µ—Ç–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏.
```swift
func fetchData() async -> Data {
    // Fetch data from a server or perform some long-running computation
    // ...
}

func process() async {
    let data = await fetchData()
    // Process the data
    // ...
}
```
### Async/await –∏ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å
–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ async –∏ await –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, –Ω–æ –æ–Ω–∏ –Ω–µ —è–≤–ª—è—é—Ç—Å—è —Å–∞–º–∏–º –º–µ—Ö–∞–Ω–∏–∑–º–æ–º –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏. –û–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –≤–∞–º –Ω–∞–ø–∏—Å–∞—Ç—å –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, –Ω–æ –æ–Ω–∏ –Ω–µ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—é—Ç, –≤ –∫–∞–∫–æ–º –ø–æ—Ç–æ–∫–µ —ç—Ç–æ—Ç –∫–æ–¥ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è.
–í Swift —Å—É—â–µ—Å—Ç–≤—É—é—Ç –¥—Ä—É–≥–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, —Ç–∞–∫–∏–µ –∫–∞–∫ Grand Central Dispatch (GCD) –∏ OperationQueues, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å—é. –û–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –∑–∞–¥–∞—Ç—å –æ—á–µ—Ä–µ–¥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–ª—è –≤–∞—à–∏—Ö –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á, —á—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å —Ç–µ–º, –≥–¥–µ –∏ –∫–æ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —ç—Ç–∏ –∑–∞–¥–∞—á–∏.

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è async/await
–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø—Ä–∏–º–µ—Ä –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Å–µ—Ç–∏.

```swift
import UIKit

let imageView = UIImageView()

func fetchImage() async throws -> UIImage {
    let url = URL(string: "https://http.cat/200")!
    let (data, _) = try await URLSession.shared.data(from: url)
    print("we are in:", Thread.current)
    return UIImage(data: data)!
}

let image = try await fetchImage()

// Update the UI on the main thread
DispatchQueue.main.async {
    imageView.image = image
}

/// we are in: <NSThread: 0x6000007ec900>{number = 5, name = (null)}
```
–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ —Ñ—É–Ω–∫—Ü–∏—è fetchImage() –æ–±—ä—è–≤–ª–µ–Ω–∞ –∫–∞–∫ async, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –æ–Ω–∞ –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ. –ú—ã –∑–∞—Ç–µ–º –≤—ã–∑—ã–≤–∞–µ–º —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º await –≤–Ω—É—Ç—Ä–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∑–∞–º—ã–∫–∞–Ω–∏—è, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –º—ã –æ–∂–∏–¥–∞–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏, –ø—Ä–µ–∂–¥–µ —á–µ–º –ø—Ä–æ–¥–æ–ª–∂–∏–º –≤—ã–ø–æ–ª–Ω—è—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥.
–ò—Ç–∞–∫, async –∏ await –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π —Å–∏–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è —á–∏—Å—Ç–æ–≥–æ, –ø–æ–Ω—è—Ç–Ω–æ–≥–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞ –≤ Swift. –û–Ω–∏ –Ω–µ –∑–∞–º–µ–Ω—è—é—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏, –Ω–æ –¥–µ–ª–∞—é—Ç —Ä–∞–±–æ—Ç—É —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º –∫–æ–¥–æ–º –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–π –∏ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω–æ–π.

[–ò—Å—Ç–æ—á–Ω–∏–∫](https://habr.com/ru/articles/742502/)
