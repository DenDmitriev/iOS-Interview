# Основы многопоточности
Многопоточность — это аспект конкурентного программирования, позволяющий программе выполняться в нескольких потоках одновременно. Это улучшает производительность, поскольку позволяет более эффективно использовать процессорное время и проводить операции в фоновом режиме.
Суть многопоточности — разделение работы на меньшие задачи, которые можно выполнять параллельно. Однако важно помнить, что многопоточность не всегда является панацеей. Иногда она приводит к сложностям в управлении состоянием и синхронизации.

# Многопоточность в Swift
Swift предлагает различные методы реализации многопоточности, такие как:
 - Grand Central Dispatch (GCD)
 - OperationQueu
 - NSLock
 - И низкоуровневые технологии, такие как pthread и NSThread

## Использование pthread и NSThread

### pthread
POSIX Threads (pthread) — это стандартный интерфейс для работы с потоками в операционных системах UNIX. pthread предоставляет набор функций и типов данных, которые позволяют создавать и управлять потоками выполнения. Хотя pthread — это низкоуровневый интерфейс, он предлагает гибкость и полный контроль над созданием и управлением потоками.
Для создания нового потока с использованием pthread в Swift, вам необходимо выполнить следующие шаги:
```swift
import Foundation

var thread: pthread_t?

func startThread() {
    pthread_create(&thread, nil, threadFunction, nil)
}

func threadFunction(arg: UnsafeMutableRawPointer?) -> UnsafeMutableRawPointer? {
    // Код, выполняемый в новом потоке
    return nil
}

func joinThread() {
    pthread_join(thread!, nil)
}
```
Данный код демонстрирует создание нового потока с помощью pthread_create(). Вы также можете определить свою функцию потока, которая будет выполняться в новом потоке. После создания потока вы можете присоединиться к нему с помощью pthread_join(), чтобы дождаться его завершения.

### NSThread
NSThread — это класс Objective-C, который предоставляет более высокоуровневый интерфейс для работы с потоками в iOS и macOS. NSThread основан на pthread и предоставляет удобные методы для создания, управления и синхронизации потоков.
Пример использования NSThread:
```swift
import Foundation

var thread: Thread?

func startThread() {
    thread = Thread(target: self, selector: #selector(threadFunction), object: nil)
    thread?.start()
}

@objc func threadFunction() {
    // Код, выполняемый в новом потоке
}

func cancelThread() {
    thread?.cancel()
    thread = nil
}
```
В этом примере мы используем класс Thread для создания нового потока и указываем целевой объект (self) и селектор функции потока (#selector(threadFunction)). Затем мы запускаем поток с помощью метода start(). Для остановки потока мы вызываем метод cancel() и устанавливаем ссылку на поток в nil.
