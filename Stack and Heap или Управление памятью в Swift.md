# Управление памятью в Swift

## Что же вообще такое память? 
Это длинная последовательность байтов (1 байт = 8 бит). Байты расположены упорядоченно, каждый байт имеет свой адрес в памяти. Когда мы создаем Value или Reference Type, то под наши объекты выделяется память (те самые упорядоченные байты).

При выделении памяти программа используется две области в оперативной памяти — стек(stack) и кучу(heap). 
Про разницу между стеком и кучей можно почитать в [этой статье](https://github.com/DenDmitriev/iOS-Interview/blob/main/Value%20Type%20and%20Reference.md)

## Стек
 - Переменные, выделенные в стеке хранятся непосредственно в памяти по шаблону, доступ к памяти осуществляется по индексу, поэтому стек очень быстрый.
 - Выделение этой памяти происходит во время компиляции программы;
 - Организована по принципы LIFO, то есть последним пришел, первым вышел
 - Используется для статического выделения памяти;
 - Есть ограничение — данные, которые хранятся в стеке должны быть статичными и конечными. Это значит, что на этапе компиляции их размер должен быть известен;
 - Каждый поток в приложении имеет доступ к своему собственному стеку, что делает стек потокобезопасным.

## Куча
 - Используется для динамического выделения памяти;
 - Медленнее так как чтоб найти данные, нужно перебрать объекты.
 - Операции происходят медленнее, чем в стеке, так как требуются дополнительные операции, чтобы найти данные в куче;
 - Куча общая для всех потоков приложения и поэтому потоко не безопасна, так как доступ к объекту могут получить одновременно несколько других потоков.

Очень важно знать и понимать сколько памяти занимает создаваемый вами объект. И мы можем узнать это [с помощью встроенного типа перечисления MemoryLayout](https://ios-interview.ru/memory-management-in-swift/).

[Источник](https://ios-interview.ru/memory-management-in-swift/)
